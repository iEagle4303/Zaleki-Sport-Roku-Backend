(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[373],{4842:function(e,t,n){Promise.resolve().then(n.bind(n,105))},105:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var i,r,o,s,a=n(7437),l=n(2265),c=n(4864),u=n(8286),d=n(4698);function f(e){let{children:t}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:t})}function h(e){let{children:t}=e;return(0,a.jsx)("div",{className:"border border-black p-1",children:t})}var v=n(6128),g=!1;function p(){var[e,t]=(0,l.useState)((0,a.jsx)("div",{})),[n,i]=(0,l.useState)((0,a.jsx)("div",{}));let[s,p]=(0,l.useState)(void 0);o=p;let[m,j]=(0,l.useState)(void 0);return r=j,(0,a.jsxs)("form",{onSubmit:function(e){e.preventDefault();let t=new FormData(e.target);Object.fromEntries(t.entries());var n=!1,i=!1;function r(){n&&i&&(g=!0)}async function o(e,t){j("Uploading"),await c.N.put((0,u.Ie)(v.videoSection,d.Gd.video,v.videoTitle,e),t)?(n=!0,j("Done"),r()):j("Fail")}async function s(e,t){i=!0,p("Uploading"),await c.N.put((0,u.Ie)(v.videoSection,d.Gd.thumbnail,v.videoTitle,e),t)?(p("Done"),r()):p("Fail")}if((0,v.isMainFieldVaild)()){let e=t.get("Video"),n=t.get("Thumbnail");if(null!=e&&null!=n){let t=v.videoId;s(t,n),o(t,e)}}},children:[(0,a.jsxs)(f,{children:[(0,a.jsx)(h,{children:(0,a.jsxs)("label",{className:"",children:["Thumbnail",(0,a.jsx)("input",{type:"file",required:!0,name:"Thumbnail",accept:".png",onChange:function(e){t((0,a.jsx)(function(e){let{src:t}=e;return(0,a.jsx)(h,{children:(0,a.jsx)("picture",{children:(0,a.jsx)("img",{src:t})})})},{src:URL.createObjectURL(e.target.files[0])}))}}),(0,a.jsx)("br",{}),s]})}),(0,a.jsx)(h,{children:(0,a.jsxs)("label",{className:"",children:["Video",(0,a.jsx)("input",{type:"file",required:!0,name:"Video",accept:".mp4",className:"",onChange:function(e){i((0,a.jsx)(function(e){let{src:t}=e;return(0,a.jsx)(h,{children:(0,a.jsx)("video",{src:t,controls:!0})})},{src:URL.createObjectURL(e.target.files[0])}))}}),(0,a.jsx)("br",{}),m]})}),e,n]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("button",{type:"submit",className:"border-collapse bg-slate-300 hover:bg-white border border-black p-1 w-full",children:"Upload files"})})]})}function m(){return(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{children:["Date Recorded ",(0,a.jsx)("input",{type:"date",name:"dateRecorded"})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("label",{children:["Add To Bottom ",(0,a.jsx)("input",{type:"checkbox",name:"bottom"})]})]})}var j=n(8653);function x(e){let{label:t,rokuGroup:n,...i}=e;var r=(0,l.useContext)(v.VideoListData),o=d.OM.getTags(r,n);return(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"text-center w-full ",children:[t+",",(0,a.jsx)(j.$F,{list:o,warnMessage:"This tag has not been used before",warnIfInputNotInList:!0,requried:!0,...i})]})})}function b(e){let{groupName:t,tagList:n}=e;var i=n.map(e=>(0,a.jsx)(x,{label:e.label,name:e.name,rokuGroup:e.rokuGroup},e.name));return(0,a.jsx)(j.ZP,{title:t,children:i})}function w(){return(0,a.jsx)(b,{groupName:"Teams",tagList:[{label:"Home Team",name:"home",rokuGroup:d.Vj.team},{label:"Away Team",name:"away",rokuGroup:d.Vj.team}]})}function S(){return(0,a.jsx)(b,{groupName:"Sport",tagList:[{label:"Sport",name:"Sport",rokuGroup:d.Vj.sport}]})}function N(){var e=(0,l.useContext)(v.VideoListData);return(0,a.jsxs)("div",{children:[(0,a.jsx)(p,{}),(0,a.jsxs)("form",{onSubmit:function(t){t.preventDefault();let n=new FormData(t.target);if(Object.fromEntries(n.entries()),(0,v.isMainFieldVaild)()&&(!v.genID||g||(alert("Files not uploaded"),0))){let t=(0,u.Ty)(v.videoSection,v.videoTitle,v.videoId,[new u.hY(d.Vj.sport,[n.get(s.Sport)]),new u.hY(d.Vj.team,[n.get(s.AwayTeam),n.get(s.HomeTeam)])],n.get("dateRecorded"));var i=!0;"on"==n.get("bottom")&&(i=!1),null==e||e.addVideo(t,v.genID,i),c.N.put((0,u.$3)(v.videoSection),null==e?void 0:e.getJSON()),(0,v.resetHard)(),g=!1,r(void 0),o(void 0)}},children:[(0,a.jsxs)(f,{children:[(0,a.jsx)(h,{children:(0,a.jsx)(j.ZP,{title:"Extra Info",children:(0,a.jsx)(m,{})})}),(0,a.jsx)(h,{children:(0,a.jsx)(S,{})}),(0,a.jsx)(h,{children:(0,a.jsx)(w,{})})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("button",{type:"submit",className:"border-collapse bg-slate-300 hover:bg-white border border-black p-1 w-full",children:"Submit"})})]})]})}function y(){var{title:e,setTitle:t}=(0,l.useContext)(v.TitleContext);return(0,l.useEffect)(()=>{t("Upload new video")}),(0,a.jsx)("div",{children:(0,a.jsx)(N,{})})}(i=s||(s={})).HomeTeam="home",i.AwayTeam="away",i.Sport="Sport"},4864:function(e,t,n){"use strict";n.d(t,{N:function(){return c}});var i=n(4866),r=n(719),o=n(5611),s=n(5297);class a{SetClient(e){this.region=e.split(":")[0];var t={};t.region=this.region,t.credentials=(0,s.s)({identityPoolId:e,clientConfig:{region:this.region}}),this.client=new i.g(t)}SetBucket(e){this.bucket=e}getWebAddress(e){if(void 0!=this.region&&void 0!=this.bucket)return"https://".concat(this.bucket,".s3.").concat(this.region,".amazonaws.com/").concat(e).replaceAll(" ","+");throw Error("Amazon info not set")}async get(e){if(null!=this.client&&null!=this.bucket)return await l(e,this.client,this.bucket)}async put(e,t){if(null!=this.client&&null!=this.bucket)return await u(e,this.client,this.bucket,t)}constructor(){this.client=null,this.bucket=null}}async function l(e,t,n){let i=new r.i({Bucket:n,Key:e,ResponseCacheControl:"no-cache"});try{let e=await t.send(i);return await e.Body.transformToString()}catch(e){console.warn(e);return}}var c=new a;async function u(e,t,n,i){let r=new o.U({Bucket:n,Key:e,Body:i});try{let e=await t.send(r);return console.log(e),!0}catch(e){return console.warn(e),!1}}},8286:function(e,t,n){"use strict";n.d(t,{$3:function(){return s},Ie:function(){return o},Ty:function(){return l},hY:function(){return a}});var i=n(4864),r=n(4698);function o(e,t,n,i){var o;return t==r.Gd.thumbnail?o=".png":t==r.Gd.video&&(o=".mp4"),"".concat(e,"/").concat(t,"/").concat(n," (").concat(i,")").concat(o)}function s(e){return"".concat(e,"/").concat(r.gR)}class a{constructor(e,t){this.name=e,this.tags=t}}function l(e,t,n,s,a){var l;void 0!=a&&""!=a&&(l=new Date(a).toISOString());let u=new Map;s.forEach(e=>{u.set(e.name,e.tags)});let d=i.N.getWebAddress(o(e,r.Gd.video,t,n)),f=i.N.getWebAddress(o(e,r.Gd.thumbnail,t,n));return new c(t,n,Object.fromEntries(u.entries()),d,f,l)}class c{getJson(){return JSON.stringify(this.video)}constructor(e,t,n,i,r,o){this.video={title:e,id:t,tags:n,video:i,thumbnail:r,dateRecorded:o}}}},4698:function(e,t,n){"use strict";n.d(t,{Gd:function(){return s},OM:function(){return h},Tj:function(){return f},VV:function(){return u},Vj:function(){return o},gR:function(){return d}});var i,r,o,s,a,l=n(4864),c=n(8286);let u="videoDatas.json",d="videoData.json";class f{getTitleList(){let e=[];for(var t=0;t<this.sections.length;t++)e.push(this.sections[t].title);return e}getSectionLocation(e){for(var t=0;t<this.sections.length;t++)if(this.sections[t].title==e)return this.sections[t].location}addSection(e){this.sections.push({title:e,location:l.N.getWebAddress((0,c.$3)(e))})}getJson(){return JSON.stringify(this.sections)}constructor(e){this.sections=[],void 0!=e?this.sections=JSON.parse(e):this.sections=[]}}class h{static getVideoList(e){return void 0==e?[]:e.videoInfo.videoList}getTagsGroups(){return this.videoInfo.tagList}addVideo(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=e.video;Object.entries(i.tags).forEach(e=>{let t=e[0],n=e[1];this.videoInfo.tagList.hasOwnProperty(t)?n.forEach(e=>{var n,i;(null===(n=this.videoInfo.tagList[t])||void 0===n?void 0:n.includes(e))||null===(i=this.videoInfo.tagList[t])||void 0===i||i.push(e)}):this.videoInfo.tagList[t]=n});var r=!1;if(!t){let e=this.videoInfo.videoList.findIndex(e=>i.id==e.id);-1!=e&&(this.videoInfo.videoList[e]=i,r=!0)}r||(n||void 0==n||null==n?this.videoInfo.videoList.push(i):this.videoInfo.videoList.unshift(i))}getJSON(){return JSON.stringify(this.videoInfo)}static getTags(e,t){let n;return void 0==e?[]:(e.videoInfo.tagList.hasOwnProperty(t)&&(n=e.videoInfo.tagList[t]),void 0==n)?[]:n}constructor(e){this.videoInfo={tagList:{},videoList:[]},void 0!=e&&(this.videoInfo=JSON.parse(e))}}(i=o||(o={})).team="Team",i.sport="Sport",(r=s||(s={})).thumbnail="Thumbnails",r.video="Videos",(a||(a={})).dateRecorded="dateRecorded"},8653:function(e,t,n){"use strict";n.d(t,{$F:function(){return l},ZP:function(){return a},hy:function(){return s}});var i=n(7437),r=n(2265);let o=new Map;function s(){Object.values(Object.fromEntries(o.entries())).forEach(e=>{e()})}function a(e){let{title:t,children:n}=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-center",children:(0,i.jsx)("strong",{children:t})}),(0,i.jsx)("div",{className:"",children:n})]})}function l(e){let{name:t="",placeholder:n="",list:s=null,value:a,warnMessage:l,warnIfInputNotInList:c,onChange:u,requried:d,dontClearInput:f=!1,...h}=e,v="w-full border ",g=v+"border-yellow-400",[p,m]=(0,r.useState)(v+"border-black");var j=!0,[x]=(0,r.useState)("");void 0!=a&&(x!=a&&(j=!1),x=a);var[b,w]=(0,r.useState)(void 0);void 0!=b&&j||""==b?(x=b,b=void 0):j||(b=void 0);let S=(0,i.jsx)(i.Fragment,{});return o.set(t,function(){w("")}),null!=s&&(S=(0,i.jsx)("datalist",{id:t,children:null==s?void 0:s.map(e=>(0,i.jsx)("option",{value:e},e))})),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"text",value:x,name:t,list:t,placeholder:n,className:p,onChange:function(e){if(c&&void 0!=s){var t=!0;if(""!=e.target.value){for(var n=0;n<(null==s?void 0:s.length);n++)if(s[n]==e.target.value){t=!1;break}}else t=!1;t?m(g):m(v)}void 0!=u&&u(e),w(e.target.value)},title:l,required:d}),S]})}},6128:function(e,t,n){"use strict";let i;n.r(t),n.d(t,{TitleContext:function(){return v},VideoListData:function(){return g},default:function(){return x},genID:function(){return l},isMainFieldVaild:function(){return j},resetHard:function(){return m},videoId:function(){return o},videoSection:function(){return a},videoTitle:function(){return r}});var r,o,s,a,l,c=n(7437),u=n(2265),d=n(4864),f=n(8653),h=n(4698);let v=(0,u.createContext)({title:null,setTitle:null}),g=(0,u.createContext)(void 0);var p=!1;function m(){(0,f.hy)(),l=void 0}function j(){if(!function(){if(void 0==l){let e=Date.now().toString();o=e,l=!0,s(e)}}(),null==r||null==a)return null==r&&alert("Title not set"),null==a&&alert("Section not set"),!1;if(!p)return!0;if(!confirm("Are you sure you want to create a new Section"))return!1;if(void 0!=i)i.addSection(a),d.N.put(h.VV,i.getJson());else{var e=new h.Tj;e.addSection(a),d.N.put(h.VV,e.getJson())}return p=!1,!0}function x(e){let{children:t}=e,[n,m]=(0,u.useState)("blank"),[j,x]=(0,u.useState)(void 0),[b,w]=(0,u.useState)([]),[S,N]=(0,u.useState)([]),[y,I]=(0,u.useState)(""),[T,k]=(0,u.useState)("");async function L(){if(void 0!=a){let e=await d.N.get(a+"/"+h.gR),t=new h.OM(e);x(t),N(h.OM.getVideoList(t).map(e=>"".concat(e.title," ​(").concat(e.id,")")))}}async function V(){let e=await d.N.get(h.VV);void 0!=e?w((i=new h.Tj(e)).getTitleList()):i=new h.Tj}return s=I,(0,c.jsxs)(v.Provider,{value:{title:n,setTitle:m},children:[(0,c.jsx)("h2",{className:"text-center text-4xl",children:n}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:(0,c.jsx)(f.$F,{name:"title",list:S,placeholder:"Title",onChange:function(e){let t=(r=e.target.value).split(" ​");t.length>1?(I(t[1].replace("(","").replace(")","")),void 0==l&&(l=!1),o=t[1].replace("(","").replace(")",""),k(t[0]),r=t[0]):k(r)},value:T})}),(0,c.jsxs)("div",{className:"grid grid-cols-2",children:[(0,c.jsx)("input",{type:"text",name:"username",className:"w-full border-black border text-center ",placeholder:"S3 bucket",onChange:function(e){d.N.SetBucket(e.target.value),V()}}),(0,c.jsx)("input",{type:"password",name:"password",className:"w-full border-black border text-center",placeholder:"Password",onChange:function(e){d.N.SetClient(e.target.value),V()}}),(0,c.jsx)(f.$F,{name:"id",placeholder:"Unique Id (leave blank to generate new one",value:y,onChange:function(e){""!=e.target.value&&(o=e.target.value),void 0==l&&(l=!1)}}),(0,c.jsx)(f.$F,{list:b,name:"section",placeholder:"Section Ex: 2023-2024",warnMessage:"You are adding a new section",onChange:function(e){let t;""!=e.target.value&&(a=e.target.value,(t=!0,b.forEach(e=>{e==a&&(t=!1)}),t)?p=!0:(L(),p=!1))},warnIfInputNotInList:!0})]})]}),(0,c.jsx)(g.Provider,{value:j,children:t})]})}}},function(e){e.O(0,[411,243,971,23,744],function(){return e(e.s=4842)}),_N_E=e.O()}]);