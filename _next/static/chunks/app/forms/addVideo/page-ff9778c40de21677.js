(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[373],{4842:function(e,t,n){Promise.resolve().then(n.bind(n,105))},105:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var r,i,s,a,o=n(7437),l=n(2265),d=n(4864),c=n(9145);function u(e){let{children:t}=e;return(0,o.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:t})}function m(e){let{children:t}=e;return(0,o.jsx)("div",{className:"border border-black p-1",children:t})}var f=n(6128),j=!1;function h(){var[e,t]=(0,l.useState)((0,o.jsx)("div",{})),[n,r]=(0,l.useState)((0,o.jsx)("div",{}));let[a,h]=(0,l.useState)(void 0);s=h;let[x,b]=(0,l.useState)(void 0);return i=b,(0,o.jsxs)("form",{onSubmit:function(e){e.preventDefault();let t=new FormData(e.target);Object.fromEntries(t.entries());var n=!1,r=!1;function i(){n&&r&&(j=!0)}async function s(e,t){b("Uploading"),await d.N.put((0,c.Ie)(f.videoSection,c.Gd.video,f.videoTitle,e),t)?(n=!0,b("Done"),i()):b("Fail")}async function a(e,t){r=!0,h("Uploading"),await d.N.put((0,c.Ie)(f.videoSection,c.Gd.thumbnail,f.videoTitle,e),t)?(h("Done"),i()):h("Fail")}if((0,f.isMainFieldVaild)()){let e=t.get("Video"),n=t.get("Thumbnail");if(null!=e&&null!=n){let t=f.videoId;a(t,n),s(t,e)}}},children:[(0,o.jsxs)(u,{children:[(0,o.jsx)(m,{children:(0,o.jsxs)("label",{className:"",children:["Thumbnail",(0,o.jsx)("input",{type:"file",required:!0,name:"Thumbnail",accept:".png",onChange:function(e){t((0,o.jsx)(function(e){let{src:t}=e;return(0,o.jsx)(m,{children:(0,o.jsx)("picture",{children:(0,o.jsx)("img",{src:t})})})},{src:URL.createObjectURL(e.target.files[0])}))}}),(0,o.jsx)("br",{}),a]})}),(0,o.jsx)(m,{children:(0,o.jsxs)("label",{className:"",children:["Video",(0,o.jsx)("input",{type:"file",required:!0,name:"Video",accept:".mp4",className:"",onChange:function(e){r((0,o.jsx)(function(e){let{src:t}=e;return(0,o.jsx)(m,{children:(0,o.jsx)("video",{src:t,controls:!0})})},{src:URL.createObjectURL(e.target.files[0])}))}}),(0,o.jsx)("br",{}),x]})}),e,n]}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)("button",{type:"submit",className:"border-collapse bg-slate-300 hover:bg-white border border-black p-1 w-full",children:"Upload files"})})]})}function x(){return(0,o.jsx)("div",{children:(0,o.jsxs)("label",{children:["Date Recorded ",(0,o.jsx)("input",{type:"date",name:"dateRecorded"})]})})}var b=n(4698),p=n(8653);function v(e){let{label:t,rokuGroup:n,...r}=e;var i=(0,l.useContext)(f.VideoListData),s=b.o.getTags(i,n);return(0,o.jsx)("div",{children:(0,o.jsxs)("label",{className:"text-center w-full ",children:[t+",",(0,o.jsx)(p.$F,{list:s,warnMessage:"This tag has not been used before",warnIfInputNotInList:!0,requried:!0,...r})]})})}function g(e){let{groupName:t,tagList:n}=e;var r=n.map(e=>(0,o.jsx)(v,{label:e.label,name:e.name,rokuGroup:e.rokuGroup},e.name));return(0,o.jsx)(p.ZP,{title:t,children:r})}function w(){return(0,o.jsx)(g,{groupName:"Teams",tagList:[{label:"Home Team",name:"home",rokuGroup:c.Vj.team},{label:"Away Team",name:"away",rokuGroup:c.Vj.team}]})}function N(){return(0,o.jsx)(g,{groupName:"Sport",tagList:[{label:"Sport",name:"Sport",rokuGroup:c.Vj.sport}]})}(r=a||(a={})).HomeTeam="home",r.AwayTeam="away",r.Sport="Sport";var S=n(8286);function y(){var e=(0,l.useContext)(f.VideoListData);async function t(){await (null==e?void 0:e.summittNewData()),(0,f.resetHard)(),j=!1,i(void 0),s(void 0)}return(0,o.jsxs)("div",{children:[(0,o.jsx)(h,{}),(0,o.jsxs)("form",{onSubmit:function(n){n.preventDefault();let r=new FormData(n.target);if(Object.fromEntries(r.entries()),(0,f.isMainFieldVaild)()&&(!f.genID||(console.log(j),j||(alert("Files not uploaded"),0)))){let n=(0,S.Ty)(f.videoSection,f.videoTitle,f.videoId,[new S.hY(c.Vj.sport,[r.get(a.Sport)]),new S.hY(c.Vj.team,[r.get(a.AwayTeam),r.get(a.HomeTeam)])],r.get("dateRecorded"));var i=!0;"on"==r.get("bottom")&&(i=!1),null==e||e.addVideo(n,f.genID,i),t()}},children:[(0,o.jsxs)(u,{children:[(0,o.jsx)(m,{children:(0,o.jsx)(p.ZP,{title:"Extra Info",children:(0,o.jsx)(x,{})})}),(0,o.jsx)(m,{children:(0,o.jsx)(N,{})}),(0,o.jsx)(m,{children:(0,o.jsx)(w,{})})]}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)("button",{type:"submit",className:"border-collapse bg-slate-300 hover:bg-white border border-black p-1 w-full",children:"Submit"})})]})]})}function T(){var{title:e,setTitle:t}=(0,l.useContext)(f.TitleContext);return(0,l.useEffect)(()=>{t("Upload new video")}),(0,o.jsx)("div",{children:(0,o.jsx)(y,{})})}},8286:function(e,t,n){"use strict";n.d(t,{NZ:function(){return o},Ty:function(){return a},hY:function(){return s}});var r=n(4864),i=n(9145);class s{constructor(e,t){this.name=e,this.tags=t}}function a(e,t,n,s,a){var l;void 0!=a&&""!=a&&(l=new Date(a).toISOString());let d=new Map;s.forEach(e=>{d.set(e.name,e.tags)});let c=r.N.getWebAddress((0,i.Ie)(e,i.Gd.video,t,n)),u=r.N.getWebAddress((0,i.Ie)(e,i.Gd.thumbnail,t,n));return new o(t,n,Object.fromEntries(d.entries()),c,u,l)}class o{getJson(){return JSON.stringify(this.video)}constructor(e,t,n,r,i,s){this.tagGroups=n,this.video={title:e,id:t,video:r,thumbnail:i,dateRecorded:s}}}}},function(e){e.O(0,[411,243,653,971,23,744],function(){return e(e.s=4842)}),_N_E=e.O()}]);