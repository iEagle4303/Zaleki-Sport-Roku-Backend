(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[373],{4842:function(e,t,n){Promise.resolve().then(n.bind(n,5967))},5967:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var i,r,s,a,o=n(7437),l=n(2265),d=n(4864),c=n(9145);function u(e){let{children:t}=e;return(0,o.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:t})}function m(e){let{children:t}=e;return(0,o.jsx)("div",{className:"border border-black p-1",children:t})}var j=n(6128),f=!1;function x(){var[e,t]=(0,l.useState)((0,o.jsx)("div",{})),[n,i]=(0,l.useState)((0,o.jsx)("div",{}));let[a,x]=(0,l.useState)(void 0);s=x;let[b,h]=(0,l.useState)(void 0);return r=h,(0,o.jsxs)("form",{onSubmit:function(e){e.preventDefault();let t=new FormData(e.target);Object.fromEntries(t.entries());var n=!1,i=!1;function r(){n&&i&&(f=!0)}async function s(e,t){h("Uploading"),await d.N.put((0,c.Ie)(j.videoSection,c.Gd.video,j.videoTitle,e),t)?(n=!0,h("Done"),r()):h("Fail")}async function a(e,t){i=!0,x("Uploading"),await d.N.put((0,c.Ie)(j.videoSection,c.Gd.thumbnail,j.videoTitle,e),t)?(x("Done"),r()):x("Fail")}if((0,j.isMainFieldVaild)()){let e=t.get("Video"),n=t.get("Thumbnail");if(null!=e&&null!=n){let t=j.videoId;a(t,n),s(t,e)}}},children:[(0,o.jsxs)(u,{children:[(0,o.jsx)(m,{children:(0,o.jsxs)("label",{className:"",children:["Thumbnail",(0,o.jsx)("input",{type:"file",required:!0,name:"Thumbnail",accept:".png",onChange:function(e){t((0,o.jsx)(function(e){let{src:t}=e;return(0,o.jsx)(m,{children:(0,o.jsx)("picture",{children:(0,o.jsx)("img",{src:t})})})},{src:URL.createObjectURL(e.target.files[0])}))}}),(0,o.jsx)("br",{}),a]})}),(0,o.jsx)(m,{children:(0,o.jsxs)("label",{className:"",children:["Video",(0,o.jsx)("input",{type:"file",required:!0,name:"Video",accept:".mp4",className:"",onChange:function(e){i((0,o.jsx)(function(e){let{src:t}=e;return(0,o.jsx)(m,{children:(0,o.jsx)("video",{src:t,controls:!0})})},{src:URL.createObjectURL(e.target.files[0])}))}}),(0,o.jsx)("br",{}),b]})}),e,n]}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)("button",{type:"submit",className:"border-collapse bg-slate-300 hover:bg-white border border-black p-1 w-full",children:"Upload files"})})]})}function b(){return(0,o.jsx)("div",{children:(0,o.jsxs)("label",{children:["Date Recorded ",(0,o.jsx)("input",{type:"date",name:"dateRecorded"})]})})}var h=n(4698),p=n(8653);function v(e){let{label:t,rokuGroup:n,...i}=e;var r=(0,l.useContext)(j.VideoListData),s=h.o.getTags(r,n);return(0,o.jsx)("div",{children:(0,o.jsxs)("label",{className:"text-center w-full ",children:[t+",",(0,o.jsx)(p.$F,{list:s,warnMessage:"This tag has not been used before",warnIfInputNotInList:!0,requried:!0,...i})]})})}function g(e){let{groupName:t,tagList:n}=e;var i=n.map(e=>(0,o.jsx)(v,{label:e.label,name:e.name,rokuGroup:e.rokuGroup},e.name));return(0,o.jsx)(p.ZP,{title:t,children:i})}function w(){return(0,o.jsx)(g,{groupName:"Teams",tagList:[{label:"Home Team",name:"home",rokuGroup:c.Vj.team},{label:"Away Team",name:"away",rokuGroup:c.Vj.team}]})}function N(){return(0,o.jsx)(g,{groupName:"Sport",tagList:[{label:"Sport",name:"Sport",rokuGroup:c.Vj.sport}]})}(i=a||(a={})).HomeTeam="home",i.AwayTeam="away",i.Sport="Sport";class S{constructor(e,t){this.name=e,this.tags=t}}class y{getJson(){return JSON.stringify(this.video)}constructor(e,t,n,i,r,s){this.tagGroups=n,this.video={title:e,id:t,video:i,thumbnail:r,dateRecorded:s}}}function T(){var e=(0,l.useContext)(j.VideoListData);async function t(){await (null==e?void 0:e.summittNewData()),(0,j.resetHard)(),f=!1,r(void 0),s(void 0),alert("Submit Ended")}return(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{}),(0,o.jsxs)("form",{onSubmit:function(n){n.preventDefault();let i=new FormData(n.target);if(Object.fromEntries(i.entries()),(0,j.isMainFieldVaild)()&&(!j.genID||(console.log(f),f||(alert("Files not uploaded"),0)))){alert("Submit Started");let n=function(e,t,n,i,r){var s;void 0!=r&&""!=r&&(s=new Date(r).toISOString());let a=new Map;i.forEach(e=>{a.set(e.name,e.tags)});let o=d.N.getWebAddress((0,c.Ie)(e,c.Gd.video,t,n)),l=d.N.getWebAddress((0,c.Ie)(e,c.Gd.thumbnail,t,n));return new y(t,n,Object.fromEntries(a.entries()),o,l,s)}(j.videoSection,j.videoTitle,j.videoId,[new S(c.Vj.sport,[i.get(a.Sport)]),new S(c.Vj.team,[i.get(a.AwayTeam),i.get(a.HomeTeam)])],i.get("dateRecorded"));var r=!0;"on"==i.get("bottom")&&(r=!1),null==e||e.addVideo(n,j.genID,r),t()}},children:[(0,o.jsxs)(u,{children:[(0,o.jsx)(m,{children:(0,o.jsx)(p.ZP,{title:"Extra Info",children:(0,o.jsx)(b,{})})}),(0,o.jsx)(m,{children:(0,o.jsx)(N,{})}),(0,o.jsx)(m,{children:(0,o.jsx)(w,{})})]}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)("button",{type:"submit",className:"border-collapse bg-slate-300 hover:bg-white border border-black p-1 w-full",children:"Submit"})})]})]})}function D(){var{title:e,setTitle:t}=(0,l.useContext)(j.TitleContext);return(0,l.useEffect)(()=>{t("Upload new video")}),(0,o.jsx)("div",{children:(0,o.jsx)(T,{})})}}},function(e){e.O(0,[411,243,653,971,23,744],function(){return e(e.s=4842)}),_N_E=e.O()}]);